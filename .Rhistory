indec$Mes = substr(indec$periodos, 6 , 7)
indec$periodos = as.Date(indec$periodos)
colnames(indec) = gsub(',', '',colnames(indec))
colnames(indec) = gsub(' ', '_',colnames(indec))
colnames(indec) = gsub('á', 'a',colnames(indec))
colnames(indec) = gsub('é', 'e',colnames(indec))
colnames(indec) = gsub('í', 'i',colnames(indec))
colnames(indec) = gsub('ó', 'o',colnames(indec))
colnames(indec) = gsub('ú', 'u',colnames(indec))
View(indec)
variable = indec$Nivel_general
variable
x = indec$Mes[1:12]
years = c('2017','2018','2019','2020','2021')
y_2017 = variable[indec$year == '2017']
y_2018 = variable[indec$year == '2018']
y_2019 = variable[indec$year == '2019']
y_2020 = variable[indec$year == '2020']
y_2021 = variable[indec$year == '2021']
agregar_valores = length(y_2020) - length(y_2021)
agregar_valores = length(variable[indec$year == '2020']  ) - length( variable[indec$year == '2021'] )
indecgrafic <- highchart() %>%
hc_chart(type = "column")  %>%
hc_xAxis(categories = x,
title = 'Year',
title=list(text = "Mes")) %>%
hc_add_series(name = '2017',
data = indec$Nivel_general[indec$year == "2017"]) %>%
hc_add_series(name = '2018',
data = indec$Nivel_general[indec$year == "2018"]) %>%
hc_add_series(name = '2019',
data = indec$Nivel_general[indec$year == "2019"]) %>%
hc_add_series(name = '2020',
data = indec$Nivel_general[indec$year == "2020"]) %>%
hc_yAxis(title=list(text = "Porcentaje "))%>%
hc_tooltip(pointFormat =  "{series.name} <br>
{point.y} %", crosshairs = TRUE) %>%
hc_colors(c("#d19bac", "#b85f7b", "#d6225b", "#8a002c")) %>%
hc_credits(enabled = TRUE, text = "Fuente: INDEC",align = "right",verticalAlign = "bottom",
style = list(color = "#2b908f", fontSize = '10px'),
href = " https://www.indec.gob.ar/ftp/cuadros/economia/sh_ipc_02_22.xls")%>%
hc_add_theme(hc_theme_google())
indecgrafic
#https://fontawesome.com/icons/chart-simple?s=solid
#https://shiny.rstudio.com/tutorial/written-tutorial/lesson3/
renderValueBox({
valueBox(value = tags$p(paste0(deframe(indec[,c(input$y)])[nrow(indec)], ' %'), style = "font-size: 100%; color: #8a002c"),
icon = "fa-diamond",
caption = tags$p(paste0('Mensual: \n',input$y), style = "font-size: 100%; color: #8a002c"),
color = '#f5d3dd')
})
indec[,c('Educacion')]
deframe(indec[,c('Educacion')])
Sys.setlocale("LC_TIME","Spanish") #para que los meses al abreviarlos no tengan un punto al final
library(datasets)
library(flexdashboard)
library(plotly)
library(crosstalk)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(tidymodels)
library(shiny)
library(dplyr)
library(lubridate)
library(readxl)
library(highcharter)
#
# substr(today(),3,4)
#
#
# file = paste0('https://www.indec.gob.ar/ftp/cuadros/economia/sh_ipc_',substr(today(),6,7),'_',substr(today(),3,4), '.xls')
#
# destfile = "indec_nacional.xls"
#
# download.file(file, destfile, mode="wb")
#
# indec = read_excel('indec_nacional.xls')
#
#
# indec = indec[9:21,]
#
# n_col = ncol(indec) - 1
#
#
# periodos = seq(as.Date("2017/1/1"), by = "month", length.out = n_col)
#
#
#
# indec = data.frame(t(indec))
#
# colnames(indec) = c(indec[1,])
#
# row.names(indec) = 1:nrow(indec)
#
# indec = indec[-1,]
#
# indec[ , c(1:(ncol(indec)))] = apply(indec[ , c(1:(ncol(indec)))], 2, trimws )
#
#
#
#
# indec[ , c(1:(ncol(indec)))] = apply(indec[ , c(1:(ncol(indec)))], 2,
#                             function(x) as.numeric(as.character(x)))
#
#
# indec$periodos = periodos
#
# library(writexl)
#
# write_xlsx(indec, 'indecnacional.xlsx' )
indec = read_excel('indecnacional.xlsx')
indec$year = year(indec$periodos)
indec$Mes = substr(indec$periodos, 6 , 7)
indec$periodos = as.Date(indec$periodos)
colnames(indec) = gsub(',', '',colnames(indec))
colnames(indec) = gsub(' ', '_',colnames(indec))
colnames(indec) = gsub('á', 'a',colnames(indec))
colnames(indec) = gsub('é', 'e',colnames(indec))
colnames(indec) = gsub('í', 'i',colnames(indec))
colnames(indec) = gsub('ó', 'o',colnames(indec))
colnames(indec) = gsub('ú', 'u',colnames(indec))
variable = indec$Nivel_general
x = indec$Mes[1:12]
View(indec)
Sys.setlocale("LC_TIME","Spanish") #para que los meses al abreviarlos no tengan un punto al final
library(datasets)
library(flexdashboard)
library(plotly)
library(crosstalk)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(tidymodels)
library(shiny)
library(dplyr)
library(lubridate)
library(readxl)
library(highcharter)
#
# substr(today(),3,4)
#
#
# file = paste0('https://www.indec.gob.ar/ftp/cuadros/economia/sh_ipc_',substr(today(),6,7),'_',substr(today(),3,4), '.xls')
#
# destfile = "indec_nacional.xls"
#
# download.file(file, destfile, mode="wb")
#
# indec = read_excel('indec_nacional.xls')
#
#
# indec = indec[9:21,]
#
# n_col = ncol(indec) - 1
#
#
# periodos = seq(as.Date("2017/1/1"), by = "month", length.out = n_col)
#
#
#
# indec = data.frame(t(indec))
#
# colnames(indec) = c(indec[1,])
#
# row.names(indec) = 1:nrow(indec)
#
# indec = indec[-1,]
#
# indec[ , c(1:(ncol(indec)))] = apply(indec[ , c(1:(ncol(indec)))], 2, trimws )
#
#
#
#
# indec[ , c(1:(ncol(indec)))] = apply(indec[ , c(1:(ncol(indec)))], 2,
#                             function(x) as.numeric(as.character(x)))
#
#
# indec$periodos = periodos
#
# library(writexl)
#
# write_xlsx(indec, 'indecnacional.xlsx' )
indec = read_excel('indecnacional.xlsx')
indec$year = year(indec$periodos)
indec$Mes = substr(indec$periodos, 6 , 7)
indec$periodos = as.Date(indec$periodos)
colnames(indec) = gsub(',', '',colnames(indec))
colnames(indec) = gsub('á', 'a',colnames(indec))
colnames(indec) = gsub('é', 'e',colnames(indec))
colnames(indec) = gsub('í', 'i',colnames(indec))
colnames(indec) = gsub('ó', 'o',colnames(indec))
colnames(indec) = gsub('ú', 'u',colnames(indec))
variable = indec$Nivel_general
x = indec$Mes[1:12]
View(indec)
colnames(indec)
colnames(indec)[5]
colnames(indec)[5] = 'v'
View(indec)
colnames(indec)[5] = 'Vivienda Agua y Elec'
View(indec)
View(indec)
colnames(indec)
indec$periodos
indec$periodos[nrow(indec)]
substr(indec$periodos[nrow(indec)],1,7)
str_view('a','a,)
str_view('a','a')
str_view('a','a')
cat(substr(indec$periodos[nrow(indec)],1,7). '\n', 'hola')
cat(substr(indec$periodos[nrow(indec)],1,7), '\n', 'hola')
cat('Periodo: ',substr(indec$periodos[nrow(indec)],1,7), '\nIndice: ')
interanual = ((indec$`Nivel general`/100)+1) *  ((lag(indec$`Nivel general`, 1)/100)+1)	*  ((lag(indec$`Nivel general`, 2)/100)+1)		*  ((lag(indec$`Nivel general`, 3)/100)+1)*  ((lag(indec$`Nivel general`, 4)/100)+1)				*  ((lag(indec$`Nivel general`, 5)/100)+1)				*  ((lag(indec$`Nivel general`, 6)/100)+1)	*  ((lag(indec$`Nivel general`, 7)/100)+1)				*  ((lag(indec$`Nivel general`, 8)/100)+1)				*  ((lag(indec$`Nivel general`, 9)/100)+1)	*  ((lag(indec$`Nivel general`, 10)/100)+1)				*  ((lag(indec$`Nivel general`, 11)/100)+1)
interanual = round(((interanual -1 ) * 100),2)
interanual
gsub("_", " ", sort(names(indec[,-c(14,15,16)])))
substr(indec$periodos[nrow(indec)],1,7)
paste0(substr(indec$periodos[nrow(indec)],1,7)
paste0(substr(indec$periodos[nrow(indec)],1,7))
paste0(substr(indec$periodos[nrow(indec)],1,7))
paste0(substr(indec$periodos[nrow(indec)],1,7), ' ', substr(indec$periodos[nrow(indec) - 12],1,7))
paste0(substr(indec$periodos[nrow(indec) - 12],1,7), ' ', substr(indec$periodos[nrow(indec)],1,7))
paste0('De: ',substr(indec$periodos[nrow(indec) - 12],1,7), ' ', substr(indec$periodos[nrow(indec)],1,7))
paste0('De: ',substr(indec$periodos[nrow(indec) - 12],1,7), ' A: ', substr(indec$periodos[nrow(indec)],1,7))
tags$p(paste0(deframe(indec[,c('Educacion')])[nrow(indec)], ' %')
tags$p(paste0(deframe(indec[,c('Educacion')])[nrow(indec)], ' %')
paste0(deframe(indec[,c('Educacion')])[nrow(indec)], ' %')
View(indec)
indec[nrow(indec),]
indec[nrow(indec),]
values = indec[nrow(indec),]
View(values)
values = indec[nrow(indec), ncol(indec) - 3]
values = indec[nrow(indec), 1:ncol(indec) - 3]
ncol(indec) - 3
values = indec[nrow(indec), (1:ncol(indec) - 3)]
to = ncol(indec) - 3
values = indec[nrow(indec), 1:to]
View(values)
sapply(values, function(x) sort(x))
values = sapply(values, function(x) sort(x))
values
values[1]
values[1]$names
values[1]$name
values[1]
class(values[1])
ver = values[1]
ver$name
ver$names
ver
class(ver)
indec[nrow(indec), 1:to]
View(indec)
sapply(indec[nrow(indec), 1:to], function(x) sort(x))
to = ncol(indec) - 3
values = indec[nrow(indec), 1:to]
values
t(apply(values, 1, sort))
values = t(apply(values, 1, sort))
View(values)
colnames(values[ncol(values)])
values[ncol(values)]
colnames(values[ncol(values)])
names(values[ncol(values)])
values[ncol(values)]
colnames(values)
colnames(values)[ncol(values)]
to = ncol(indec) - 3
values = indec[nrow(indec), 1:to]
colnames(t(apply(values, 1, sort)))[ncol(t(apply(values, 1, sort)))]
to = ncol(indec) - 3
colnames(t(apply(indec[nrow(indec), 1:to], 1, sort)))[ncol(t(apply(indec[nrow(indec), 1:to], 1, sort)))]
t(apply(indec[nrow(indec), 1:to], 1, sort))
t(apply(indec[nrow(indec), 1:to], 1, sort))[ncol(t(apply(indec[nrow(indec), 1:to], 1, sort)))]
Sys.setlocale("LC_TIME","Spanish") #para que los meses al abreviarlos no tengan un punto al final
library(datasets)
library(flexdashboard)
library(plotly)
library(crosstalk)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(tidymodels)
library(shiny)
library(dplyr)
library(lubridate)
library(readxl)
library(highcharter)
#
# substr(today(),3,4)
#
#
# file = paste0('https://www.indec.gob.ar/ftp/cuadros/economia/sh_ipc_',substr(today(),6,7),'_',substr(today(),3,4), '.xls')
#
# destfile = "indec_nacional.xls"
#
# download.file(file, destfile, mode="wb")
#
# indec = read_excel('indec_nacional.xls')
#
#
# indec = indec[9:21,]
#
# n_col = ncol(indec) - 1
#
#
# periodos = seq(as.Date("2017/1/1"), by = "month", length.out = n_col)
#
#
#
# indec = data.frame(t(indec))
#
# colnames(indec) = c(indec[1,])
#
# row.names(indec) = 1:nrow(indec)
#
# indec = indec[-1,]
#
# indec[ , c(1:(ncol(indec)))] = apply(indec[ , c(1:(ncol(indec)))], 2, trimws )
#
#
#
#
# indec[ , c(1:(ncol(indec)))] = apply(indec[ , c(1:(ncol(indec)))], 2,
#                             function(x) as.numeric(as.character(x)))
#
#
# indec$periodos = periodos
#
# library(writexl)
#
# write_xlsx(indec, 'indecnacional.xlsx' )
indec = read_excel('indecnacional.xlsx')
indec$year = year(indec$periodos)
indec$Mes = substr(indec$periodos, 6 , 7)
indec$periodos = as.Date(indec$periodos)
colnames(indec) = gsub(',', '',colnames(indec))
colnames(indec) = gsub('á', 'a',colnames(indec))
colnames(indec) = gsub('é', 'e',colnames(indec))
colnames(indec) = gsub('í', 'i',colnames(indec))
colnames(indec) = gsub('ó', 'o',colnames(indec))
colnames(indec) = gsub('ú', 'u',colnames(indec))
colnames(indec)[2] = 'Alimentos y bebidas'
colnames(indec)[5] = 'Vivienda Agua y Elec'
colnames(indec)[4] = 'Prendias y Calzado'
colnames(indec)[6] = 'Equip y Mant del Hogar'
variable = indec$Nivel_general
x = indec$Mes[1:12]
x
month.abb[x]
x
month <- c(12,3,6,2,3,7)
month.abb[month]
month <- c(x)
month.abb[month]
month <- c(1:12)
month.abb[month]
View(indec)
Sys.setlocale("LC_TIME","Spanish") #para que los meses al abreviarlos no tengan un punto al final
library(datasets)
library(flexdashboard)
library(plotly)
library(crosstalk)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(tidymodels)
library(shiny)
library(dplyr)
library(lubridate)
library(readxl)
library(highcharter)
#
# substr(today(),3,4)
#
#
# file = paste0('https://www.indec.gob.ar/ftp/cuadros/economia/sh_ipc_',substr(today(),6,7),'_',substr(today(),3,4), '.xls')
#
# destfile = "indec_nacional.xls"
#
# download.file(file, destfile, mode="wb")
#
# indec = read_excel('indec_nacional.xls')
#
#
# indec = indec[9:21,]
#
# n_col = ncol(indec) - 1
#
#
# periodos = seq(as.Date("2017/1/1"), by = "month", length.out = n_col)
#
#
#
# indec = data.frame(t(indec))
#
# colnames(indec) = c(indec[1,])
#
# row.names(indec) = 1:nrow(indec)
#
# indec = indec[-1,]
#
# indec[ , c(1:(ncol(indec)))] = apply(indec[ , c(1:(ncol(indec)))], 2, trimws )
#
#
#
#
# indec[ , c(1:(ncol(indec)))] = apply(indec[ , c(1:(ncol(indec)))], 2,
#                             function(x) as.numeric(as.character(x)))
#
#
# indec$periodos = periodos
#
# library(writexl)
#
# write_xlsx(indec, 'indecnacional.xlsx' )
indec = read_excel('indecnacional.xlsx')
indec$year = year(indec$periodos)
indec$Mes = as.numeric(indec$periodos, 6 , 7)
indec$periodos = as.Date(indec$periodos)
colnames(indec) = gsub(',', '',colnames(indec))
colnames(indec) = gsub('á', 'a',colnames(indec))
colnames(indec) = gsub('é', 'e',colnames(indec))
colnames(indec) = gsub('í', 'i',colnames(indec))
colnames(indec) = gsub('ó', 'o',colnames(indec))
colnames(indec) = gsub('ú', 'u',colnames(indec))
colnames(indec)[2] = 'Alimentos y bebidas'
colnames(indec)[5] = 'Vivienda Agua y Elec'
colnames(indec)[4] = 'Prendias y Calzado'
colnames(indec)[6] = 'Equip y Mant del Hogar'
variable = indec$Nivel_general
x = indec$Mes[1:12]
month <- c(1:12)
View(indec)
Sys.setlocale("LC_TIME","Spanish") #para que los meses al abreviarlos no tengan un punto al final
library(datasets)
library(flexdashboard)
library(plotly)
library(crosstalk)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(tidymodels)
library(shiny)
library(dplyr)
library(lubridate)
library(readxl)
library(highcharter)
#
# substr(today(),3,4)
#
#
# file = paste0('https://www.indec.gob.ar/ftp/cuadros/economia/sh_ipc_',substr(today(),6,7),'_',substr(today(),3,4), '.xls')
#
# destfile = "indec_nacional.xls"
#
# download.file(file, destfile, mode="wb")
#
# indec = read_excel('indec_nacional.xls')
#
#
# indec = indec[9:21,]
#
# n_col = ncol(indec) - 1
#
#
# periodos = seq(as.Date("2017/1/1"), by = "month", length.out = n_col)
#
#
#
# indec = data.frame(t(indec))
#
# colnames(indec) = c(indec[1,])
#
# row.names(indec) = 1:nrow(indec)
#
# indec = indec[-1,]
#
# indec[ , c(1:(ncol(indec)))] = apply(indec[ , c(1:(ncol(indec)))], 2, trimws )
#
#
#
#
# indec[ , c(1:(ncol(indec)))] = apply(indec[ , c(1:(ncol(indec)))], 2,
#                             function(x) as.numeric(as.character(x)))
#
#
# indec$periodos = periodos
#
# library(writexl)
#
# write_xlsx(indec, 'indecnacional.xlsx' )
indec = read_excel('indecnacional.xlsx')
indec$year = year(indec$periodos)
indec$Mes = as.numeric(substr(indec$periodos, 6 , 7))
indec$periodos = as.Date(indec$periodos)
colnames(indec) = gsub(',', '',colnames(indec))
colnames(indec) = gsub('á', 'a',colnames(indec))
colnames(indec) = gsub('é', 'e',colnames(indec))
colnames(indec) = gsub('í', 'i',colnames(indec))
colnames(indec) = gsub('ó', 'o',colnames(indec))
colnames(indec) = gsub('ú', 'u',colnames(indec))
colnames(indec)[2] = 'Alimentos y bebidas'
colnames(indec)[5] = 'Vivienda Agua y Elec'
colnames(indec)[4] = 'Prendias y Calzado'
colnames(indec)[6] = 'Equip y Mant del Hogar'
variable = indec$Nivel_general
x = indec$Mes[1:12]
month <- c(1:12)
indec$month = month.abb[indec$Mes]
